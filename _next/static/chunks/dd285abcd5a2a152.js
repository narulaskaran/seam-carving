(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47710,t=>{"use strict";function e(t,e,a,r,l){let o,i,h,n,d,s;0===r?(o=t[s=(r*e+l)*4],i=t[s+1],h=t[s+2],n=t[s=((r+1)*e+l)*4]):r===a-1?(o=t[s=(r*e+l)*4],i=t[s+1],h=t[s+2],n=t[s=((r-1)*e+l)*4]):(o=t[s=((r-1)*e+l)*4],i=t[s+1],h=t[s+2],n=t[s=((r+1)*e+l)*4]);let f=(o-n)**2+(i-(d=t[s+1]))**2+(h-t[s+2])**2;return 0===l?(o=t[s=(r*e+l)*4],i=t[s+1],h=t[s+2],n=t[s=(r*e+l+1)*4]):l===e-1?(o=t[s=(r*e+l)*4],i=t[s+1],h=t[s+2],n=t[s=(r*e+l-1)*4]):(o=t[s=(r*e+l-1)*4],i=t[s+1],h=t[s+2],n=t[s=(r*e+l+1)*4]),f+((o-n)**2+(i-(d=t[s+1]))**2+(h-t[s+2])**2)}function a(t,e){let a=t[0],r=0;for(let l=1;l<e;l++)t[l]<a&&(a=t[l],r=l);return r}function r(t,r,l){let o=new Float64Array(l*r),i=new Int32Array(l*r);for(let a=0;a<l;a++)for(let i=0;i<r;i++)o[a*r+i]=e(t,r,l,a,i);for(let t=1;t<l;t++)for(let e=0;e<r;e++){let a=o[(t-1)*r+e],l=e;e-1>=0&&o[(t-1)*r+e-1]<a&&(a=o[(t-1)*r+e-1],l=e-1),e+1<r&&o[(t-1)*r+e+1]<a&&(a=o[(t-1)*r+e+1],l=e+1),o[t*r+e]+=a,i[t*r+e]=l}let h=r-1,n=(l-1)*r,d=a(new Float64Array(o.buffer,8*n,r),r),s=new Uint8ClampedArray(h*l*4);for(let e=l-1;e>=0;e--){let a=0;for(let l=0;l<h;l++){a===d&&a++;let o=(e*r+a)*4,i=(e*h+l)*4;s[i]=t[o],s[i+1]=t[o+1],s[i+2]=t[o+2],s[i+3]=t[o+3],a++}d=i[e*r+d]}return{data:s,width:h}}function l(t,r,l){let o=new Float64Array(l*r),i=new Int32Array(l*r);for(let a=0;a<l;a++)for(let i=0;i<r;i++)o[a*r+i]=e(t,r,l,a,i);for(let t=1;t<r;t++)for(let e=0;e<l;e++){let a=o[e*r+t-1],h=e;e-1>=0&&o[(e-1)*r+t-1]<a&&(a=o[(e-1)*r+t-1],h=e-1),e+1<l&&o[(e+1)*r+t-1]<a&&(a=o[(e+1)*r+t-1],h=e+1),o[e*r+t]+=a,i[e*r+t]=h}let h=l-1,n=r-1,d=new Float64Array(l);for(let t=0;t<l;t++)d[t]=o[t*r+n];let s=a(d,l),f=new Uint8ClampedArray(r*h*4);for(let e=n;e>=0;e--){let a=0;for(let l=0;l<h;l++){a===s&&a++;let o=(a*r+e)*4,i=(l*r+e)*4;f[i]=t[o],f[i+1]=t[o+1],f[i+2]=t[o+2],f[i+3]=t[o+3],a++}s=i[s*r+e]}return{data:f,height:h}}let o=!1;self.onmessage=t=>{let e=t.data;if("cancel"===e.type){o=!0;return}if("start"===e.type){o=!1;let{data:t,width:a,height:i,targetWidth:h,targetHeight:n}=e;try{let e=function(t,e,a,o,i,h){let n=t,d=e,s=a,f=e-o,g=a-i,w=f+g,u=0;for(;f>0&&g>0;){let t=r(n,d,s);if(n=t.data,d=t.width,f--,u++,h&&!1===h({data:n,width:d,height:s,seamsRemoved:u,totalSeams:w}))return{data:n,width:d,height:s};let e=l(n,d,s);if(n=e.data,s=e.height,g--,u++,h&&!1===h({data:n,width:d,height:s,seamsRemoved:u,totalSeams:w}))return{data:n,width:d,height:s}}let c=f>0,m=Math.max(f,g);for(let t=0;t<m;t++){if(c){let t=r(n,d,s);n=t.data,d=t.width}else{let t=l(n,d,s);n=t.data,s=t.height}if(u++,h&&!1===h({data:n,width:d,height:s,seamsRemoved:u,totalSeams:w}))break}return{data:n,width:d,height:s}}(t,a,i,h,n,t=>!o&&(self.postMessage({type:"progress",data:t.data,width:t.width,height:t.height,seamsRemoved:t.seamsRemoved,totalSeams:t.totalSeams}),!0));o||self.postMessage({type:"complete",data:e.data,width:e.width,height:e.height})}catch(t){o||self.postMessage({type:"error",message:t instanceof Error?t.message:"Unknown error"})}}},t.s([],47710)}]);